# 美容クリニック向けデジタルメッセージカード アプリデザイン設計書

## 1. コンセプト

美容クリニックの顧客体験向上のため、スタッフから患者様へ心のこもったメッセージカードを送信できるアプリ。
エルメスのホリデーグリーティング型体験を参考に、「開封する瞬間の特別感」を重視した設計。

**デザイン方針:**
- **エレガント&ミニマル**: 美容クリニックのブランドイメージに合わせた洗練されたデザイン
- **余白と間**: 凝りすぎず、余白を活かした上品な演出
- **ワンハンド操作**: 片手で完結する直感的なUI

---

## 2. カラーパレット

美容クリニックらしい清潔感と高級感を演出するカラー:

- **Primary (アクセント)**: `#D4A373` (ローズゴールド) - CTA、アクティブ状態
- **Background**: `#FFFFFF` (ライト), `#1A1A1A` (ダーク)
- **Card Background**: `#F9F7F5` (ライト), `#2A2A2A` (ダーク)
- **Text Primary**: `#2C2C2C` (ライト), `#ECEDEE` (ダーク)
- **Text Secondary**: `#6B6B6B` (ライト), `#9BA1A6` (ダーク)
- **Text Disabled**: `#B0B0B0`

---

## 3. タイポグラフィ

- **Title (32pt)**: 画面タイトル、カード見出し
- **Subtitle (20pt)**: セクション見出し
- **Body (16pt)**: 本文、説明文
- **Caption (14pt)**: 補足情報、ラベル
- **Small (12pt)**: フッター、注釈

**Line Height**: 1.5× fontSize (可読性重視)

---

## 4. スペーシング

8pt グリッドシステム:
- **xs**: 8pt
- **sm**: 12pt
- **md**: 16pt
- **lg**: 24pt
- **xl**: 32pt
- **xxl**: 48pt

---

## 5. ボーダーラジウス

- **Button**: 12pt
- **Card**: 16pt
- **Modal/Sheet**: 24pt (上部のみ)

---

## 6. 画面構成

### 6.1 ホーム画面 (テンプレート選択)

**パス**: `/` (app/(tabs)/index.tsx)

**主要コンテンツ:**
- アプリタイトル「メッセージカードを作成」
- テンプレートカード一覧 (3種類)
  - テンプレート1: シンプル (白背景 + ゴールドアクセント)
  - テンプレート2: エレガント (淡いピンク背景 + 花モチーフ)
  - テンプレート3: モダン (グレー背景 + 幾何学模様)
- 各テンプレートカードにプレビュー画像とタイトル

**レイアウト:**
- 縦スクロール可能なリスト
- 各テンプレートカードは画面幅の90%、アスペクト比3:4
- カード間のマージン: 16pt
- タップでメッセージ編集画面へ遷移

**ユーザーフロー:**
1. ユーザーがアプリを開く
2. テンプレート一覧を閲覧
3. 好みのテンプレートをタップ
4. メッセージ編集画面へ遷移

---

### 6.2 メッセージ編集画面

**パス**: `/edit` (app/edit.tsx)

**主要コンテンツ:**
- 選択したテンプレートのリアルタイムプレビュー (上部50%)
- 入力フォーム (下部50%)
  - メッセージ本文 (複数行テキスト、最大200文字)
  - 差出人名 (1行テキスト、任意)
  - 文字数カウンター表示
- 「カードを作成」ボタン (画面下部固定)

**レイアウト:**
- プレビューエリア: 画面上部、タップで拡大可能
- 入力エリア: 画面下部、キーボード表示時も操作可能
- ボタン: 画面下部固定、セーフエリア考慮

**ユーザーフロー:**
1. メッセージを入力
2. リアルタイムでプレビュー更新
3. 「カードを作成」ボタンをタップ
4. ローディング表示 (1-2秒)
5. 生成完了画面へ遷移

**バリデーション:**
- メッセージ本文: 1文字以上200文字以内
- 差出人名: 任意 (空欄可)

---

### 6.3 カード生成完了画面

**パス**: `/complete` (app/complete.tsx)

**主要コンテンツ:**
- 成功メッセージ「カードが完成しました!」
- カードプレビュー (静止画)
- カードURL表示 (コピー可能)
- アクションボタン
  - 「LINEで送る」ボタン (プライマリ)
  - 「URLをコピー」ボタン (セカンダリ)
  - 「新しいカードを作る」リンク

**レイアウト:**
- 縦スクロール可能
- プレビュー: 画面幅の80%、中央配置
- ボタン: 画面下部、縦並び、各44pt高さ

**ユーザーフロー:**
1. カード生成完了を確認
2. LINEで送るボタンをタップ → LINE共有シート表示
3. または、URLをコピーして手動で共有
4. 新しいカードを作るリンクでホーム画面へ戻る

**LINE共有:**
- `line://msg/text/` スキームを使用
- メッセージテキスト: 「{差出人名}からメッセージカードが届きました! {URL}」

---

### 6.4 カード閲覧画面 (受信者側)

**パス**: `/card/[id]` (app/card/[id].tsx)

**主要コンテンツ:**
- 開封アニメーション (初回のみ)
  - フェードイン (0.5秒)
  - カードが上にスライド (1秒、イージング)
  - メッセージテキストのフェードイン (0.5秒)
- メッセージ本文表示
- 差出人名表示
- フッター: クリニック名 (任意)

**レイアウト:**
- 全画面表示、背景グラデーション
- カード: 画面中央、アスペクト比3:4
- テキスト: カード内、中央揃え、適切な余白

**ユーザーフロー:**
1. 受信者がLINEからURLをタップ
2. ローディング (1秒以内)
3. 開封アニメーション再生
4. メッセージ閲覧
5. (オプション) 画面下部に「返信する」ボタン (第2フェーズ)

**アニメーション仕様:**
- 技術: react-native-reanimated
- 再生時間: 合計2秒
- 初回表示時のみ再生 (AsyncStorageで管理)
- 音声なし

---

## 7. ナビゲーション構造

```
/(tabs)/index.tsx (ホーム: テンプレート選択)
  └─> /edit.tsx (メッセージ編集)
        └─> /complete.tsx (生成完了)

/card/[id].tsx (カード閲覧、外部からのアクセス)
```

**タブバー:**
- 初期フェーズではタブバーなし (シングルフロー)
- 将来的に「履歴」「設定」タブを追加可能

---

## 8. コンポーネント設計

### 8.1 TemplateCard
- テンプレートのプレビュー表示
- タップ可能、ホバー効果
- Props: template (id, name, previewImage)

### 8.2 MessagePreview
- リアルタイムプレビュー表示
- Props: template, message, senderName

### 8.3 AnimatedCard
- 開封アニメーション付きカード表示
- Props: template, message, senderName, showAnimation

### 8.4 ShareButton
- LINE共有ボタン
- Props: url, message

---

## 9. データ構造

### Card
- `id`: UUID
- `templateId`: string (template1, template2, template3)
- `message`: string (最大200文字)
- `senderName`: string (任意)
- `createdAt`: timestamp
- `isActive`: boolean (無効化用)

---

## 10. 技術スタック

- **フロントエンド**: React Native + Expo
- **ナビゲーション**: Expo Router
- **アニメーション**: react-native-reanimated
- **ローカルストレージ**: AsyncStorage (閲覧履歴管理)
- **バックエンド**: tRPC + Prisma
- **データベース**: PostgreSQL
- **OGP画像生成**: サーバーサイドで動的生成

---

## 11. 非機能要件

- **パフォーマンス**: 初回ロード3秒以内、アニメーション60fps維持
- **アクセシビリティ**: 最小タッチターゲット44pt、コントラスト比4.5:1以上
- **対応環境**: iOS 13+, Android 8+, LINE内ブラウザ
- **セキュリティ**: カードURLは推測困難なUUID使用

---

## 12. 成功指標 (KPI)

- カード作成完了率: 80%以上
- URL開封率: 60%以上
- アニメーション完走率: 95%以上 (途中離脱なし)

---

## 13. 将来の拡張 (第2フェーズ)

- 受信者からの返信機能
- カード送信履歴の閲覧
- カスタムテンプレート作成
- 画像アップロード機能
- プッシュ通知
